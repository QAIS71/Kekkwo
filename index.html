<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø­Ø·Ø© Ø§Ù„ÙØ¶Ø§Ø¦ÙŠØ© Ø§Ù„Ø¯ÙˆÙ„ÙŠØ© ğŸ›°ï¸</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    
    <style>
        body {
            background-color: #0f0f1a; /* Ù„ÙˆÙ† ÙØ¶Ø§Ø¡ Ø¯Ø§ÙƒÙ† */
            color: #fff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        h1 {
            color: #00d2ff;
            text-shadow: 0 0 10px #00d2ff;
        }
        #map {
            height: 400px;
            width: 80%;
            margin: 20px auto;
            border: 2px solid #00d2ff;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 210, 255, 0.2);
        }
        .stats-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .stat-box {
            background: #1c1c2e;
            padding: 15px 25px;
            border-radius: 8px;
            border: 1px solid #333;
            min-width: 150px;
        }
        .stat-label {
            display: block;
            font-size: 0.9em;
            color: #aaa;
            margin-bottom: 5px;
        }
        .stat-value {
            font-size: 1.4em;
            font-weight: bold;
            color: #00ff88;
        }
        /* ØªØµÙ…ÙŠÙ… Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø­Ø·Ø© */
        .iss-icon {
            filter: drop-shadow(0 0 5px red);
        }
    </style>
</head>
<body>

    <h1>ğŸ›°ï¸ Ø§Ù„Ù…Ø­Ø·Ø© Ø§Ù„ÙØ¶Ø§Ø¦ÙŠØ© Ø§Ù„Ø¯ÙˆÙ„ÙŠØ© (Ù…Ø¨Ø§Ø´Ø±)</h1>
    
    <div id="map"></div>

    <div class="stats-container">
        <div class="stat-box">
            <span class="stat-label">Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶ (Latitude)</span>
            <span class="stat-value" id="lat">0.00</span>
        </div>
        <div class="stat-box">
            <span class="stat-label">Ø®Ø· Ø§Ù„Ø·ÙˆÙ„ (Longitude)</span>
            <span class="stat-value" id="lon">0.00</span>
        </div>
        <div class="stat-box">
            <span class="stat-label">Ø§Ù„Ø³Ø±Ø¹Ø© (ÙƒÙ…/Ø³Ø§Ø¹Ø©)</span>
            <span class="stat-value" id="vel">0</span>
        </div>
        <div class="stat-box">
            <span class="stat-label">Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ (ÙƒÙ…)</span>
            <span class="stat-value" id="alt">0</span>
        </div>
    </div>

    <script>
        // 1. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
        const map = L.map('map').setView([0, 0], 2);
        
        // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®Ø±Ø§Ø¦Ø· OpenStreetMap
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap contributors',
            maxZoom: 18,
        }).addTo(map);

        // 2. Ø¥Ø¹Ø¯Ø§Ø¯ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø­Ø·Ø© Ø§Ù„ÙØ¶Ø§Ø¦ÙŠØ©
        const issIcon = L.icon({
            iconUrl: 'https://upload.wikimedia.org/wikipedia/commons/d/d0/International_Space_Station.svg',
            iconSize: [50, 32],
            iconAnchor: [25, 16],
            className: 'iss-icon'
        });

        const marker = L.marker([0, 0], {icon: issIcon}).addTo(map);
        let firstLoad = true;

        // 3. Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† API
        async function getISS() {
            try {
                // Ù†Ø³ØªØ®Ø¯Ù… API ÙŠØ¯Ø¹Ù… Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø¢Ù…Ù† HTTPS Ù„Ù„ÙˆÙŠØ¨
                const response = await fetch('https://api.wheretheiss.at/v1/satellites/25544');
                const data = await response.json();

                const { latitude, longitude, velocity, altitude } = data;

                // ØªØ­Ø¯ÙŠØ« Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©
                marker.setLatLng([latitude, longitude]);
                
                // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ù„Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (ÙÙŠ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ ÙÙ‚Ø· Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ø¥Ø²Ø¹Ø§Ø¬)
                if(firstLoad) {
                    map.setView([latitude, longitude], 3);
                    firstLoad = false;
                }

                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙÙŠ Ø§Ù„ØµÙØ­Ø©
                document.getElementById('lat').textContent = latitude.toFixed(4);
                document.getElementById('lon').textContent = longitude.toFixed(4);
                // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø³Ø±Ø¹Ø© Ù„Ø£Ø±Ù‚Ø§Ù… ØµØ­ÙŠØ­Ø© ÙˆØ¹Ø±Ø¶Ù‡Ø§
                document.getElementById('vel').textContent = Math.round(velocity).toLocaleString();
                document.getElementById('alt').textContent = altitude.toFixed(2);

            } catch (error) {
                console.error("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø£Ù‚Ù…Ø§Ø± Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ©:", error);
            }
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¯Ø§Ù„Ø© Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©
        getISS();

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒÙ„ 2 Ø«Ø§Ù†ÙŠØ©
        setInterval(getISS, 2000);
    </script>

</body>
</html>
